TTC_lidar = [12.5156,12.6142,14.091,16.6894,15.7465,12.7835,11.9844,13.1241,13.0241,11.1746,12.8086,8.95978,9.96439,9.59863,8.52157,9.51552,9.61241,8.3988];
TTC_lidar_min = [12.9722,12.264,13.9161,7.11572,16.2511,12.4213,34.3404,9.34376,18.1318,18.0318,3.83244,-10.8537,9.22307,10.9678,8.09422,3.17535,-9.99424,8.30978];

SHITOMASI.BRISK = [14.1119,14.7273,13.4904,12.398,12.6754,14.6109,13.7029,15.5997,11.5126,-inf,11.3024,11.6524,11.7243,11.6421,9.33785,11.3079,11.4487,9.12792];
SHITOMASI.BRIEF = [13.8948,13.1487,14.1413,13.3398,12.1886,15.1561,18.3368,12.3793,12.2083,13.3448,12.2,12.2294,12.3292,12.7102,12.9788,10.7212,13.2272,7.75039];
SHITOMASI.ORB = [13.8801,17.7333,11.6626,12.1506,12.3305,15.1536,13.8434,12.1848,11.274,13.1345,11.3027,12.7698,12.1119,14.6845,10.2642,12.9353,13.1247,10.3858];
SHITOMASI.FREAK = [13.6546,13.1487,11.0399,12.9162,12.5939,14.2385,12.8908,12.8515,11.6077,13.203,11.9293,11.7855,12.26,11.5161,10.1,13.4725,12.828,11.2811];
SHITOMASI.AKAZE = nan;
SHITOMASI.SIFT = [14.0746,14.6618,14.3827,13.0192,13.3479,14.1323,13.935,14.5085,12.4803,13.3599,12.3562,11.6524,12.8498,12.7102,12.3541,13.3159,13.1247,11.9739];


HARRIS.BRISK = [inf,11.5792,-inf,inf,inf,11.6947,inf,inf,inf,inf,17.6204,-inf,-inf,6.65726,inf,inf,inf,inf];
HARRIS.BRIEF = [11.5792,35.3833,inf,13.5907,14.2744,-inf,-inf,-inf,20.5862,-inf,12.245,13.4327,5.6061,-inf,6.71705,12.5848,inf,inf];
HARRIS.ORB = [11.5792,35.3833,nan,-inf,-inf,inf,13.497,-inf,-inf,-inf,11.7414,12.245,568.322,5.66097,-inf,-inf,-inf,7.03775];
HARRIS.FREAK = [-inf,-inf,39.584,-inf,-inf,-inf,-inf,-inf,-inf,12.3379,12.9162,13.4327,6.71705-inf,-inf,-inf,-inf,-inf,-inf,];
HARRIS.AKAZE = nan;
HARRIS.SIFT = [10.586,-11.4731,11.5792,35.3833,13.6217,13.1905,-inf,-inf,-inf,nan,10.2931,11.7414,12.245,568.322,5.6061,-13.6263,7.03775,12.5848];


FAST.BRISK = [12.5943,12.3204,12.2128,12.6846,15.9174,11.9876,12.8486,12.2996,12.3653,14.2326,12.0003,12.1142,11.6099,11.3027,11.0677,11.1255,10.2967,11.6591];
FAST.BRIEF = [14.1214,11.6079,17.1502,13.5336,29.6631,13.5023,13.5597,14.8463,14.4179,13.8793,12.9013,11.5139,13.6447,11.0469,12.6506,10.7262,10.9042,13.9652];
FAST.ORB = [11.1736,12.2644,12.04,14.1171,13.5429,16.0352,14.1666,12.6605,12.4394,15.3553,11.8892,13.1616,13.403,10.7149,10.3823,12.2278,11.8786,11.3381];
FAST.FREAK = [11.8903,12.5571,13.0553,13.4882,12.2988,11.9523,12.6115,12.5196,12.3431,12.7005,12.1065,12.2033,11.612,11.1224,10.3595,10.7863,10.9062,11.5273];
FAST.AKAZE = nan;
FAST.SIFT = [14.2728,13.3149,17.58,14.7376,15.3516,13.6935,13.3794,15.0007,14.1259,14.8664,13.2623,13.0985,13.4181,12.3837,12.5254,12.5955,11.2415,13.4123];

BRISK.BRISK = [13.031,23.1027,16.426,15.2031,25.1868,17.6743,16.8563,19.7242,14.9704,13.4121,12.8176,11.0107,11.8505,12.0376,15.6929,11.2969,9.70105,11.7318];
BRISK.BRIEF = [14.1782,22.4427,16.2025,23.9696,18.2883,41.7786,23.1147,18.4064,20.2064,17.3265,21.3163,16.9333,14.6369,15.3365,11.054,14.5766,13.745,15.2896];
BRISK.ORB = [17.5514,20.1555,17.8997,15.621,22.3963,20.629,18.7943,16.0691,15.425,12.2923,13.9703,14.4678,11.5189,12.1556,11.4651,14.6651,10.5274,11.9131];
BRISK.FREAK = [12.3483,20.4555,13.9222,13.6652,22.3057,16.0739,15.4463,21.4854,18.2991,13.9839,14.8409,12.431,15.0024,12.0955,16.4182,10.3542,9.18413,10.8412];
BRISK.AKAZE = nan;
BRISK.SIFT = [13.0555,16.5726,16.7905,13.5407,33.0019,16.1118,13.3155,17.0214,16.1917,14.6711,12.8176,11.7895,13.6458,11.0659,13.3531,11.0452,11.2009,12.6639];

ORB.BRISK = [17.4087,269.478,26.3748,28.8362,596.745,10.8411,-inf,15.3461,-inf,-inf,7.47226,-inf,7.71469,26.7727,13.594,26.3083,20.6887,28.0396];
ORB.BRIEF = [25.2367,-inf,93.0149,14.486,25.9716,-48.152,-inf,34.6298,-inf,-inf,25.1348,24.3854,-inf,13.5034,32.6184,12.8498,17.7772,21.8093];
ORB.ORB = [-inf,10.1192,23.9536,27.1889,-inf,18.4549,-inf,-inf,-inf,-inf,9.41643,-inf,-inf,-inf,-inf,-inf,12.8853,-inf];
ORB.FREAK = [12.2074,-inf,11.108,12.5761,-inf,12.8194,-inf,11.9978,19.0607,-inf,8.34928,35.8486,7.05866,54.1773,32.4831,10.4631,9.93894,8.73235];
ORB.AKAZE = nan;
ORB.SIFT = [17.5222,13.8583,12.9667,11213.5,73.2489,17.9796,127.591,11.3168,21.2278,-inf,7.86152,-inf,25.7577,13.7643,33.3507,10.4631,17.4675,17.7717];

AKAZE.BRISK = [13.9319,19.8372,13.3659,15.5584,17.7295,14.7084,15.8833,13.9229,13.8234,15.4176,12.3627,13.297,10.0855,13.0985,16.4045,12.9399,10.7552,8.92524];
AKAZE.BRIEF = [15.948,15.0455,15.4404,13.8482,16.3913,17.1893,19.5754,14.121,20.0901,11.5709,14.2309,15.5964,10.1939,13.2479,13.4114,11.2947,10.2933,9.8842];
AKAZE.ORB = [13.7987,17.6964,14.5607,16.1676,15.8082,17.7343,19.9839,17.9636,19.8065,11.5597,15.1964,11.4861,13.1898,10.9526,10.2055,9.73338,10.3587,10.8282];
AKAZE.FREAK = [12.9182,15.36,15.7884,14.1762,16.2229,14.4455,15.372,18.4314,19.6683,11.8941,12.162,15.1634,10.7833,9.87627,9.89452,12.6393,9.95697,8.79442];
AKAZE.AKAZE = [12.9551,17.5868,14.0105,14.2488,16.4623,16.7629,15.2349,18.2497,17.6244,13.9012,13.5643,12.0918,11.0846,13.0161,13.2349,11.9882,10.304,10.1191]; 
AKAZE.SIFT = [12.4519,17.924,15.2252,15.7638,17.4498,19.564,15.4734,17.3454,16.6246,12.4187,13.0651,11.7033,13.7195,13.2939,14.2866,9.89604,10.7372,10.0434];

SIFT.BRISK = [11.5918,13.0542,13.5432,23.1526,15.0724,11.5722,14.0533,14.9979,13.4055,13.3483,12.7588,10.2518,9.59755,11.9798,9.94612,9.99808,9.53044,13.8618];
SIFT.BRIEF = [12.2506,13.0807,15.0877,21.3092,13.2197,11.9659,15.7167,16.8399,12.7456,11.0246,13.616,10.1979,11.2348,10.8806,10.0867,9.99808,9.3448,11.4327];
SIFT.ORB = nan;
SIFT.FREAK = [11.2638,13.616,13.5454,20.5163,15.1633,11.9744,14.4148,13.1874,14.4882,11.3657,13.6524,12.8878,10.056,9.77994,8.98705,8.72439,9.12142,9.40627];
SIFT.AKAZE = nan;
SIFT.SIFT = [11.3868,12.5726,12.9422,18.8184,12.4784,11.0585,13.5735,14.6937,13.3976,11.8385,11.2887,11.0189,11.6883,10.5754,9.77464,9.05267,8.69186,9.23257,];
%%
figure(1);clf(1);
subplot(4,2,1)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(SHITOMASI.BRISK, 'DisplayName', 'SHITOMASI.BRISK')
plot(SHITOMASI.BRIEF, 'DisplayName', 'SHITOMASI.BRIEF')
plot(SHITOMASI.ORB, 'DisplayName', 'SHITOMASI.ORB')
plot(SHITOMASI.FREAK, 'DisplayName', 'SHITOMASI.FREAK')
plot(SHITOMASI.AKAZE, 'DisplayName', 'SHITOMASI.AKAZE')
plot(SHITOMASI.SIFT, 'DisplayName', 'SHITOMASI.SIFT')
title('Detector: SHI-TOMASI')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')

subplot(4,2,2)
plot(TTC_lidar ,'--', 'DisplayName', 'LiDAR')
hold on
plot(HARRIS.BRISK, 'DisplayName', 'HARRIS.BRISK')
plot(HARRIS.BRIEF, 'DisplayName', 'HARRIS.BRIEF')
plot(HARRIS.ORB, 'DisplayName', 'HARRIS.ORB')
plot(HARRIS.FREAK, 'DisplayName', 'HARRIS.FREAK')
plot(HARRIS.AKAZE, 'DisplayName', 'HARRIS.AKAZE')
plot(HARRIS.SIFT, 'DisplayName', 'HARRIS.SIFT')
title('Detector: HARRIS')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')


subplot(4,2,3)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(ORB.BRISK, 'DisplayName', 'ORB.BRISK')
plot(ORB.BRIEF, 'DisplayName', 'ORB.BRIEF')
plot(ORB.ORB, 'DisplayName', 'ORB.ORB')
plot(ORB.FREAK, 'DisplayName', 'ORB.FREAK')
plot(ORB.AKAZE, 'DisplayName', 'ORB.AKAZE')
plot(ORB.SIFT, 'DisplayName', 'ORB.SIFT')
title('Detector: ORB')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')


subplot(4,2,4)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(FAST.BRISK, 'DisplayName', 'FAST.BRISK')
plot(FAST.BRIEF, 'DisplayName', 'FAST.BRIEF')
plot(FAST.ORB, 'DisplayName', 'FAST.ORB')
plot(FAST.FREAK, 'DisplayName', 'FAST.FREAK')
plot(FAST.AKAZE, 'DisplayName', 'FAST.AKAZE')
plot(FAST.SIFT, 'DisplayName', 'FAST.SIFT')
title('Detector: FAST')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')

subplot(4,2,5)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(BRISK.BRISK, 'DisplayName', 'BRISK.BRISK')
plot(BRISK.BRIEF, 'DisplayName', 'BRISK.BRIEF')
plot(BRISK.ORB, 'DisplayName', 'BRISK.ORB')
plot(BRISK.FREAK, 'DisplayName', 'BRISK.FREAK')
plot(BRISK.AKAZE, 'DisplayName', 'BRISK.AKAZE')
plot(BRISK.SIFT, 'DisplayName', 'BRISK.SIFT')
title('Detector: BRISK')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')

subplot(4,2,6)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(AKAZE.BRISK, 'DisplayName', 'AKAZE.BRISK')
plot(AKAZE.BRIEF, 'DisplayName', 'AKAZE.BRIEF')
plot(AKAZE.ORB, 'DisplayName', 'AKAZE.ORB')
plot(AKAZE.FREAK, 'DisplayName', 'AKAZE.FREAK')
plot(AKAZE.AKAZE, 'DisplayName', 'AKAZE.AKAZE')
plot(AKAZE.SIFT, 'DisplayName', 'AKAZE.SIFT')
title('Detector: AKAZE')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')

subplot(4,2,7)
plot(TTC_lidar,'--', 'DisplayName', 'LiDAR')
hold on
plot(SIFT.BRISK, 'DisplayName', 'BRISK')
plot(SIFT.BRIEF, 'DisplayName', 'BRIEF')
plot(SIFT.ORB, 'DisplayName', 'ORB')
plot(SIFT.FREAK, 'DisplayName', 'FREAK')
plot(SIFT.AKAZE, 'DisplayName', 'AKAZE')
plot(SIFT.SIFT, 'DisplayName', 'SIFT')
title('Detector: SIFT')
ylim([0, 25])
ylabel('TTC [s]')
xlabel('Frame Nr.')

legend('show', 'Location','none')

%%
figure(2);clf(2);
plot(TTC_lidar, 'DisplayName', 'LiDAR - median')
hold on
plot(TTC_lidar_min, 'DisplayName', 'LiDAR - min')
ylabel('TTC [s]')
xlabel('Frame Nr.')

legend('show')

%%
figure(3);clf(3);
detectors = {'SHITOMASI', 'HARRIS', 'FAST', 'BRISK', 'ORB', 'AKAZE', 'SIFT'};
descriptors = {'BRISK', 'BRIEF', 'ORB', 'FREAK', 'AKAZE', 'SIFT'};
error = [rms(SHITOMASI.BRISK - TTC_lidar), rms(SHITOMASI.BRIEF - TTC_lidar), rms(SHITOMASI.ORB - TTC_lidar),rms(SHITOMASI.FREAK - TTC_lidar),rms(SHITOMASI.AKAZE - TTC_lidar),rms(SHITOMASI.SIFT - TTC_lidar)];
plot(error, 'o');
hold on

error = [rms(HARRIS.BRISK - TTC_lidar), rms(HARRIS.BRIEF - TTC_lidar), rms(HARRIS.ORB - TTC_lidar),rms(HARRIS.FREAK - TTC_lidar),rms(HARRIS.AKAZE - TTC_lidar),rms(HARRIS.SIFT - TTC_lidar)];
plot(error, 'd');

error = [rms(FAST.BRISK - TTC_lidar), rms(FAST.BRIEF - TTC_lidar), rms(FAST.ORB - TTC_lidar),rms(FAST.FREAK - TTC_lidar),rms(FAST.AKAZE - TTC_lidar),rms(FAST.SIFT - TTC_lidar)];
plot(error, '.');

error = [rms(BRISK.BRISK - TTC_lidar), rms(BRISK.BRIEF - TTC_lidar), rms(BRISK.ORB - TTC_lidar),rms(BRISK.FREAK - TTC_lidar),rms(BRISK.AKAZE - TTC_lidar),rms(BRISK.SIFT - TTC_lidar)];
plot(error,'x');

error = [rms(ORB.BRISK - TTC_lidar), rms(ORB.BRIEF - TTC_lidar), rms(ORB.ORB - TTC_lidar),rms(ORB.FREAK - TTC_lidar),rms(ORB.AKAZE - TTC_lidar),rms(ORB.SIFT - TTC_lidar)];
plot(error, '*');

error = [rms(AKAZE.BRISK - TTC_lidar), rms(AKAZE.BRIEF - TTC_lidar), rms(AKAZE.ORB - TTC_lidar),rms(AKAZE.FREAK - TTC_lidar),rms(AKAZE.AKAZE - TTC_lidar),rms(AKAZE.SIFT - TTC_lidar)];
plot(error, '+');

error = [rms(SIFT.BRISK - TTC_lidar), rms(SIFT.BRIEF - TTC_lidar), rms(SIFT.ORB - TTC_lidar),rms(SIFT.FREAK - TTC_lidar),rms(SIFT.AKAZE - TTC_lidar),rms(SIFT.SIFT - TTC_lidar)];
plot(error, 'x');

xticklabels(descriptors)
ylabel('RMS TTC Camera vs LiDAR')
xlabel("Keypoint descriptors"); 
legend(detectors);
xlim([0.5,6.5])
% ylim([0, 25])
